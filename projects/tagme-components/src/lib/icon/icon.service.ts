import { Injectable } from "@angular/core";
import { DomSanitizer, SafeHtml } from '@angular/platform-browser';

@Injectable({
	providedIn: 'root'
})
export class IconService {

	/**
	 * Injects the dom's sanitizer
	 * 
	 * @param sanitizer Sanitizer of content used here for html trusted
	 */
	constructor(private sanitizer: DomSanitizer) {}
	
	/**
	 * Map of icons in SVG
	 */
	private icons = new Map([
		['alcohol', (color, size) => `<svg width="${size}" height="${size}" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><path d="M32.4784 19.1293L34.0284 17.5741C34.029 17.5735 34.0143 17.5575 34.015 17.5562C34.4343 17.6598 34.8798 17.5332 35.2067 17.2051L35.5152 16.8956C36.0123 16.3968 36.0282 15.6013 35.5311 15.1032L32.8105 12.3733C32.3134 11.8745 31.5059 11.8758 31.0088 12.3739L30.7004 12.6834C30.3735 13.0115 30.2702 13.4815 30.3735 13.9023C30.3728 13.9029 30.3792 13.9106 30.3786 13.9112L28.8286 15.4664C26.6293 14.5085 23.961 14.9248 22.1612 16.7306L13.7655 25.155C11.417 27.5115 11.4094 31.3227 13.7572 33.6792L14.2983 34.2221C16.6467 36.5786 20.4749 36.6003 22.8234 34.2438L31.2191 25.8195C33.0182 24.0136 33.4338 21.3361 32.4784 19.1293ZM31.7303 13.0978C31.8297 12.9981 31.9909 12.9981 32.091 13.0978L34.795 15.8111C34.8944 15.9108 34.8944 16.0726 34.795 16.173L34.4796 16.4896C34.3801 16.5893 34.2189 16.5893 34.1189 16.4896L31.4148 13.7763C31.3154 13.6765 31.3154 13.5147 31.4148 13.4143L31.7303 13.0978ZM22.102 33.5206C20.1512 35.478 16.9692 35.4556 15.019 33.4989L14.478 32.9559C12.5278 30.9985 12.5355 27.8357 14.4863 25.8789L16.003 24.357L23.6187 31.9987L22.102 33.5206ZM24.3395 31.2754L16.7238 23.6337L21.1849 19.1574L28.8006 26.7991L24.3395 31.2754ZM29.522 26.0752L21.9063 18.4336L22.882 17.4545C24.4772 15.8539 26.8645 15.5387 28.7458 16.5446L28.7547 16.5356C28.951 16.6098 29.16 16.581 29.2964 16.4442L30.9636 14.7713L33.1718 16.9871L31.5047 18.6599C31.3536 18.8115 31.3147 19.0308 31.3963 19.2207C31.3957 19.2214 31.3944 19.2227 31.3938 19.2233C32.3402 21.0771 32.0801 23.509 30.4977 25.0962L29.522 26.0752Z" fill="${color}"/><path d="M35.9866 29.8374C35.963 28.7759 34.735 26.4783 34.487 26.0242C34.4845 26.0198 34.4819 26.0159 34.4794 26.0121C34.4743 26.0031 34.4692 25.9948 34.4635 25.9859C34.4596 25.9801 34.4552 25.9737 34.4507 25.968C34.445 25.9603 34.4399 25.9526 34.4335 25.9456C34.4284 25.9392 34.4233 25.9334 34.4176 25.927C34.4118 25.9206 34.4061 25.9149 34.4004 25.9085C34.394 25.9021 34.3876 25.8957 34.3806 25.8899C34.3749 25.8848 34.3698 25.8797 34.364 25.8752C34.3564 25.8688 34.3481 25.8631 34.3405 25.8567C34.3354 25.8528 34.3296 25.849 34.3245 25.8452C34.3156 25.8394 34.3067 25.8337 34.2971 25.8279C34.2933 25.8254 34.2895 25.8228 34.2857 25.8209C34.2837 25.8202 34.2825 25.8196 34.2806 25.8183C34.2716 25.8132 34.2621 25.8094 34.2532 25.8049C34.2468 25.8017 34.2404 25.7985 34.2334 25.7959C34.2258 25.7927 34.2181 25.7902 34.2111 25.7876C34.2028 25.7844 34.1939 25.7812 34.1856 25.7787C34.1799 25.7768 34.1748 25.7761 34.169 25.7742C34.1582 25.7716 34.148 25.7684 34.1372 25.7665C34.1327 25.7659 34.1289 25.7652 34.1244 25.7646C34.1123 25.7627 34.1008 25.7608 34.0887 25.7595C34.0836 25.7588 34.0785 25.7588 34.0734 25.7588C34.0626 25.7582 34.0511 25.7576 34.0403 25.7576C34.0327 25.7576 34.025 25.7582 34.0174 25.7588C34.0091 25.7595 34.0001 25.7595 33.9919 25.7601C33.9823 25.7608 33.9727 25.7627 33.9638 25.764C33.9568 25.7652 33.9504 25.7659 33.9434 25.7672C33.9339 25.7691 33.9249 25.7716 33.9154 25.7736C33.9084 25.7755 33.9014 25.7768 33.895 25.7787C33.8867 25.7812 33.8791 25.7838 33.8714 25.787C33.8631 25.7895 33.8555 25.7927 33.8472 25.7959C33.8408 25.7985 33.8345 25.8017 33.8281 25.8049C33.8192 25.8094 33.8096 25.8132 33.8007 25.8183C33.7988 25.819 33.7975 25.8196 33.7956 25.8209C33.7911 25.8234 33.7879 25.826 33.7835 25.8285C33.7745 25.8337 33.7656 25.8388 33.7573 25.8452C33.7516 25.849 33.7459 25.8535 33.7401 25.8573C33.7325 25.8631 33.7248 25.8688 33.7178 25.8746C33.7115 25.8797 33.7057 25.8848 33.7 25.8906C33.6936 25.8963 33.6872 25.9021 33.6815 25.9078C33.6751 25.9142 33.6694 25.9206 33.663 25.9277C33.6579 25.9334 33.6528 25.9392 33.6484 25.9449C33.642 25.9526 33.6363 25.9603 33.6305 25.9686C33.6267 25.9743 33.6222 25.9795 33.619 25.9852C33.6133 25.9942 33.6076 26.0031 33.6025 26.0121C33.5999 26.0159 33.5974 26.0198 33.5955 26.0236C33.3469 26.4776 32.1182 28.7778 32.0959 29.8387C32.0213 30.7314 32.3572 31.4757 33.02 31.8818C33.3361 32.0755 33.6962 32.1721 34.0556 32.1721C34.4227 32.1721 34.7891 32.0711 35.1071 31.8696C35.7514 31.4604 36.072 30.7205 35.9866 29.8374ZM34.5603 31.0051C34.2608 31.1943 33.8548 31.1963 33.5489 31.0089C33.2207 30.8075 33.0646 30.4187 33.1098 29.9141C33.1105 29.9065 33.1105 29.8988 33.1105 29.8911C33.1111 29.8834 33.1118 29.8764 33.1118 29.8687C33.1118 29.5989 33.3686 28.7228 34.0352 27.3773C34.5062 28.3366 34.9625 29.4313 34.9625 29.8687C34.9625 29.8764 34.9657 29.8834 34.9663 29.8911C34.9669 29.9013 34.9682 29.9116 34.9695 29.9218C35.0211 30.4199 34.8771 30.8049 34.5603 31.0051Z" fill="${color}"/></g><defs><clipPath id="clip0"><rect width="24" height="24" fill="white" transform="translate(12 12)"/></clipPath></defs></svg>`],
		['back', (color, size) => `<svg width="${size}" height="${size}" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M17.3499 6.32743H2.17204L7.1296 1.14815C7.38345 0.885517 7.38345 0.459615 7.1296 0.196978C6.87575 -0.0656593 6.46409 -0.0656593 6.21024 0.196978L0.190389 6.4754C0.057206 6.61311 -0.00536307 6.79579 0.00113762 6.97629C0.000893841 6.98419 0 6.99201 0 7C0 7.00799 0.000893841 7.01581 0.00113762 7.02371C-0.00536307 7.20421 0.057206 7.38689 0.190389 7.5246L6.21024 13.803C6.33717 13.9343 6.5035 14 6.66992 14C6.83626 14 7.00267 13.9343 7.1296 13.803C7.38345 13.5404 7.38345 13.1145 7.1296 12.8518L2.17204 7.67257H17.3499C17.7089 7.67257 18 7.37143 18 7C18 6.62858 17.7089 6.32743 17.3499 6.32743Z" fill="${color}"/></svg>`],
		['minus', (color, size) => `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="7" y="11" width="10" height="2" fill="${color}"/></svg>`],
		['pin', (color, size) => `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 5C9.243 5 7 7.36566 7 10.2734C7 11.2559 7.25803 12.2146 7.74636 13.0464L11.7154 19.7923C11.7914 19.9215 11.9254 20 12.0694 20H12.0727C12.218 19.9988 12.3523 19.9179 12.4269 19.7864L16.2948 12.9752C16.7561 12.161 17 11.2267 17 10.2734C17 7.36566 14.757 5 12 5ZM15.5796 12.524L12.0631 18.7164L8.45464 12.5834C8.04817 11.891 7.82778 11.0923 7.82778 10.2734C7.82778 7.85029 9.7025 5.87305 12 5.87305C14.2975 5.87305 16.1694 7.85029 16.1694 10.2734C16.1694 11.068 15.9636 11.8463 15.5796 12.524Z" fill="${color}"/><path d="M11.997 7.63672C10.6753 7.63672 9.60001 8.75822 9.60001 10.1367C9.60001 11.5064 10.6578 12.6367 11.997 12.6367C13.3527 12.6367 14.394 11.4914 14.394 10.1367C14.394 8.75822 13.3187 7.63672 11.997 7.63672ZM11.997 11.8089C11.1113 11.8089 10.3937 11.058 10.3937 10.1367C10.3937 9.21772 11.1159 8.4645 11.997 8.4645C12.8782 8.4645 13.5977 9.21772 13.5977 10.1367C13.5977 11.0446 12.8968 11.8089 11.997 11.8089Z" fill="${color}"/></svg>`],
		['grape', (color, size) => `<svg width="${size}" height="${size}" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><path d="M18.822 16.2347C19.852 16.6981 20.7892 16.9294 21.6333 16.9294C21.7575 16.9294 21.8755 16.8795 21.9869 16.7795C22.0988 16.6796 22.1545 16.5543 22.1545 16.4037C22.1545 15.4523 21.8688 14.3571 21.2981 13.1175C20.7268 11.8779 19.9946 10.8956 19.1009 10.1694C17.8353 9.14264 16.4449 8.79217 14.931 9.11796C14.7322 9.16793 14.608 9.28085 14.5585 9.45608L14.5401 9.49372C14.5279 9.51902 14.5218 9.5437 14.5218 9.569C14.3731 11.3719 14.9187 12.949 16.1599 14.3016C16.9043 15.1271 17.7919 15.7719 18.822 16.2347ZM18.4311 10.9579C18.9027 11.3584 19.4177 11.9908 19.9762 12.8546C20.5347 13.7185 20.8883 14.7137 21.0375 15.8404C20.3671 15.7404 19.6539 15.4899 18.8966 15.0895C18.1393 14.689 17.475 14.188 16.9043 13.587C15.9855 12.5603 15.539 11.3837 15.5641 10.0564C16.5813 9.95649 17.5374 10.257 18.4311 10.9579Z" fill="${color}"/><path d="M34.4232 20.5353C34.0384 19.8843 33.5234 19.371 32.878 18.9952C32.2327 18.6195 31.4632 18.4319 30.5695 18.4319C29.6758 18.4319 28.8317 18.77 28.0377 19.4463C27.6652 18.8453 27.163 18.3696 26.5299 18.0191C26.0607 17.7593 25.5647 17.5964 25.041 17.5286C25.0484 17.6594 25.0135 17.1102 24.9187 17.2065C24.8661 16.2359 24.6642 17.3299 24.4905 17.3299C24.1926 17.3299 24.0623 17.0831 23.9798 17.6057C23.9773 17.5785 23.9761 17.5508 23.9749 17.5224C23.4347 17.5853 22.9276 17.7507 22.453 18.0185C21.8321 18.3689 21.336 18.8447 20.9635 19.4456C20.1689 18.7694 19.2257 18.4313 18.1338 18.4313C17.0419 18.4313 16.0798 18.8447 15.2485 19.6709C14.416 20.4977 14 21.4429 14 22.5073C14 23.5717 14.2857 24.4793 14.8564 25.2302C15.4271 25.9811 16.1593 26.4945 17.053 26.7703C16.9539 27.1461 16.9043 27.5342 16.9043 27.9346C16.9043 29.0113 17.2579 29.9504 17.9656 30.7513C18.6733 31.5522 19.5603 32.0156 20.6277 32.1409C20.4044 32.6666 20.2925 33.2052 20.2925 33.7556C20.2925 34.9323 20.7023 35.9337 21.5214 36.7605C22.3404 37.5867 23.228 38.0001 24.1834 38.0001C25.1389 38.0001 25.9457 37.8057 26.6039 37.4182C27.2615 37.0301 27.7765 36.5106 28.149 35.8596C28.5216 35.2087 28.7075 34.5639 28.7075 33.9253C28.7075 33.2867 28.6084 32.7172 28.4096 32.2161C29.452 32.0662 30.3273 31.5899 31.0344 30.789C31.7415 29.9881 32.0957 29.0613 32.0957 28.0099C32.0957 27.5842 32.0339 27.1714 31.9097 26.7703C32.8034 26.4951 33.5417 25.9818 34.1253 25.2302C34.7088 24.4793 35 23.6716 35 22.8078C35 21.944 34.8079 21.1863 34.4232 20.5353ZM22.2658 19.4839C22.8867 18.8576 23.6311 18.5448 24.4997 18.5448C25.3683 18.5448 26.1133 18.8515 26.7336 19.4648C27.3545 20.0781 27.6646 20.8296 27.6646 21.7181C27.6646 22.6073 27.3545 23.3582 26.7336 23.9715C26.1127 24.5848 25.3683 24.8915 24.4997 24.8915C23.6311 24.8915 22.8861 24.5848 22.2658 23.9715C21.6449 23.3582 21.3348 22.6134 21.3348 21.7366C21.3354 20.8611 21.6455 20.1096 22.2658 19.4839ZM15.7311 24.6478C15.2717 24.0591 15.0423 23.3643 15.0423 22.5635C15.0423 21.7619 15.3525 21.0487 15.9733 20.4224C16.5942 19.7961 17.3447 19.4833 18.2262 19.4833C19.1076 19.4833 19.8582 19.7961 20.479 20.4224C20.3549 20.8481 20.2931 21.3424 20.2931 21.9057C20.2931 22.469 20.4546 23.0639 20.7769 23.6895C19.3125 23.7895 18.2201 24.4781 17.5001 25.7553C16.7801 25.606 16.1905 25.2364 15.7311 24.6478ZM18.3565 29.5117C18.0837 29.036 17.9466 28.4289 17.9466 27.6903C17.9466 26.9517 18.2568 26.2755 18.8776 25.6621C19.4985 25.0488 20.2429 24.7422 21.1115 24.7422H21.5581C22.278 25.4684 23.1589 25.8688 24.2018 25.9441C23.8544 26.5951 23.6806 27.2213 23.6806 27.8223C23.6806 28.4233 23.7553 28.949 23.9039 29.4C23.6311 29.9258 23.2463 30.3453 22.7496 30.6582C22.2529 30.971 21.7073 31.1277 21.1115 31.1277C19.8955 31.1271 18.9767 30.5884 18.3565 29.5117ZM26.7342 36.0096C26.1133 36.6359 25.4435 36.9487 24.7236 36.9487C24.0036 36.9487 23.4017 36.8049 22.9179 36.5168C22.434 36.2286 22.0493 35.8405 21.7636 35.3525C21.4779 34.8644 21.3354 34.3257 21.3354 33.7377C21.3354 33.1491 21.4841 32.6049 21.7819 32.1038C22.8989 31.9286 23.7926 31.3899 24.463 30.4891C25.1579 31.4405 26.0889 32.0039 27.2554 32.1791C27.5282 32.6801 27.6652 33.2873 27.6652 34.0006C27.6652 34.7138 27.3545 35.3833 26.7342 36.0096ZM30.1224 30.2441C29.5015 30.8828 28.7571 31.2018 27.8885 31.2018C27.0199 31.2018 26.2748 30.8889 25.6546 30.2626C25.0337 29.6364 24.7236 28.8978 24.7236 28.0469C24.7236 27.1954 24.9964 26.4569 25.5426 25.8312C26.2375 25.656 26.8455 25.3302 27.3673 24.8545C27.5159 24.8292 27.6903 24.8168 27.8885 24.8168C28.7571 24.8168 29.5021 25.1235 30.1224 25.7368C30.7432 26.3501 31.0534 27.0949 31.0534 27.9716C31.0534 28.8484 30.7426 29.6055 30.1224 30.2441ZM33.25 24.6669C32.7783 25.2426 32.1825 25.6183 31.4626 25.7936C30.7182 24.5416 29.6257 23.8654 28.1858 23.7654C28.5332 23.1145 28.7069 22.5011 28.7069 21.9248C28.7069 21.3485 28.6451 20.8605 28.521 20.46C29.1167 19.8091 29.8612 19.4833 30.7549 19.4833C31.6485 19.4833 32.4058 19.7961 33.0261 20.4224C33.6463 21.0487 33.9571 21.7681 33.9571 22.582C33.9577 23.3958 33.7216 24.0912 33.25 24.6669Z" fill="${color}"/><path d="M25.0404 17.5285C25.0398 17.5229 25.0404 17.5174 25.0398 17.5118C25.0276 17.3742 25.0337 17.2175 25.0582 17.0423C25.1823 15.9909 25.6044 14.9641 26.3244 13.9627C27.615 12.1598 29.3155 11.3712 31.4253 11.5964C31.5739 11.6217 31.7048 11.5903 31.8161 11.5026C31.9274 11.415 31.9898 11.2959 32.0021 11.146C32.0143 10.9961 31.977 10.864 31.8901 10.7517C31.8033 10.6394 31.6852 10.5703 31.5366 10.545C29.4513 10.3445 27.689 10.9708 26.2491 12.4232C25.4796 13.2247 24.8961 14.1386 24.4991 15.1653C24.1198 16.1457 23.9449 16.9312 23.973 17.5235C24.1394 17.5044 24.3082 17.4939 24.4807 17.4939C24.671 17.4933 24.8575 17.505 25.0404 17.5285Z" fill="${color}"/></g><defs><clipPath id="clip0"><rect width="21" height="29" fill="white" transform="translate(14 9)"/></clipPath></defs></svg>`],
		['plus', (color, size) => `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="11" y="7" width="2" height="10" fill="${color}"/><rect x="7" y="11" width="10" height="2" fill="${color}"/></svg>`],
		['trash', (color, size) => `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="mask0" mask-type="alpha" maskUnits="userSpaceOnUse" x="7" y="11" width="10" height="10"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 11H17V21H7V11Z" fill="${color}"/></mask><g mask="url(#mask0)"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.01699 19.7935H14.983L15.8048 12.2065H8.19521L9.01699 19.7935ZM15.1936 21H8.80637C8.30578 21 7.89602 20.5894 7.87493 20.0764L7.00364 12.0324C7.00122 12.0101 7 11.9876 7 11.9652C7 11.433 7.41823 11 7.93232 11H16.0677C16.5818 11 17 11.433 17 11.9652C17 11.9876 16.9988 12.0101 16.9964 12.0324L16.1251 20.0764C16.104 20.5894 15.6943 21 15.1936 21Z" fill="${color}"/></g><path fill-rule="evenodd" clip-rule="evenodd" d="M8.39995 8.8024L15.4487 7.83517L14.9456 7.13088L8.67162 7.99181L8.39995 8.8024ZM16.1581 8.86492L8.02775 9.98056C7.93167 9.99375 7.78712 10.0071 7.64411 9.9957C7.55658 9.98875 7.47997 9.97342 7.40998 9.94885C7.18612 9.87021 7.03283 9.69486 7 9.47983L7.02154 9.23109L7.61975 7.44605C7.66455 7.24379 7.84293 6.97846 8.44835 6.89538L14.8317 6.01946C14.9277 6.00627 15.0723 5.99294 15.2153 6.00429C15.3028 6.01123 15.3794 6.02657 15.4494 6.05113C15.5998 6.10395 15.7183 6.20035 15.7898 6.32313L16.8987 7.87572L16.9938 8.10845C17.0164 8.25592 17.0227 8.74626 16.1581 8.86492Z" fill="${color}"/><path fill-rule="evenodd" clip-rule="evenodd" d="M10.7095 6.7861L10.562 5.78627L12.3468 5.53273L12.4943 6.53256L14 6.31866L13.8089 5.02334C13.7128 4.37152 13.0941 3.91804 12.4299 4.01243L10.0429 4.35152C9.37864 4.44587 8.9165 5.0529 9.01266 5.70468L9.20379 7L10.7095 6.7861Z" fill="${color}"/></svg>`]
	]);

	/**
	 * Get an icon with a color from the map
	 *
	 * @param iconName Key of the icon in the map
	 * @param color (Optional) color to fill the icon
	 * @param size (Optional) size of the icon
	 * 
	 * @returns {SafeHtml} SVG of the icon
	 */
	public getIcon(iconName: string, color: string = '${color}', size: number = 24): SafeHtml {
		return this.icons.has(iconName) 
			? this.sanitizer.bypassSecurityTrustHtml(this.icons.get(iconName)(color, size))
			: null;
	}
}